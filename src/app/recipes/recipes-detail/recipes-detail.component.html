<app-loader *ngIf="loading" class="d-flex justify-content-center"></app-loader>
<app-validation-modal [validationModalParams]="validationModalParams"></app-validation-modal>

<div *ngIf="!loading">
  <div class="button-row">
    <a mat-fab color="primary" [routerLink]="['/recipes-list']"><mat-icon>list</mat-icon></a>
  </div>

  <mat-card class="detail-card">
    <mat-card-header class="d-flex justify-content-center">
      <mat-card-title class="d-flex justify-content-center">
        <h2> {{recipe.name}} </h2>
      </mat-card-title>
      <mat-card-subtitle class="d-flex justify-content-center">
        <dd> {{recipe.description}} </dd>
      </mat-card-subtitle>
    </mat-card-header>

    <div class="row">
      <mat-card-content class="col-sm-4 d-flex justify-content-center">
        <dl>
          <!-- <dt> User </dt>
          <dd> by {{user.firstName}} {{ user.lastName }} </dd> -->

          <dt> Preparation Time </dt>
          <dd> {{recipe.time || "No Preparation Time"}} </dd>

          <dt> Servings </dt>
          <dd> {{recipe.servings || "No Servings"}} </dd>

          <dt> Calories </dt>
          <dd> {{recipe.calories || "No Calories"}} </dd>

          <dt> Quantity </dt>
          <dd> {{recipe.quantity || "No Quantity"}} </dd>
        </dl>
      </mat-card-content>

      <mat-card-content class="col-sm-4 d-flex justify-content-center"> 
        <dl>
          <div *ngFor="let step of recipe.steps; let i = index">
              <dt> Step: {{i+1}} </dt>
              <dd> {{step.step || "No Steps"}} </dd>
          </div>
        </dl>
      </mat-card-content>

      <mat-card-content class="col-sm-4 d-flex justify-content-center">
        <dl>
          <dt>
            Ingredients
          </dt>

          <div  class="list">
            <div class="box" *ngFor="let ingredient of ingredients | keyvalue">
              {{ingredient.value.name}}
            </div>
            <div class="box" *ngIf="ingredients == null || ingredients.length == 0">
              No Ingredients
            </div>
          </div>
        </dl>
      </mat-card-content>
    </div>

    <mat-card-actions class="d-flex justify-content-between">
      <a mat-fab color="primary" [routerLink]="['/recipes-update/', recipe.id]">
        <mat-icon> edit </mat-icon>
      </a>
      <a mat-fab color="warn" (click)="deleteRecipe(recipe.id)">
        <mat-icon> delete </mat-icon>
      </a>
    </mat-card-actions>
  </mat-card>
</div>
