<app-loading-modal *ngIf="loading"></app-loading-modal>
<app-notification-modal [notificationModalParams]="notificationModalParams"></app-notification-modal>

<div class="d-flex justify-content-center">
  <h2>
    The Recipes
  </h2>
</div>
<br/>

<div [hidden]="loading">
  <div class="button-row">
    <a mat-mini-fab matTooltip="Add Recipe" color="primary" [routerLink]="['/recipe-edit']" class="row-button">
      <mat-icon>add</mat-icon>
    </a>

    <span *ngFor="let filters of filtersList" class="row-button">
      <button mat-button [matMenuTriggerFor]="menu" matBadge="{{filters.numberOfSelected == 0 ? '' : filters.numberOfSelected}}">{{filters.displayName}}</button>
      <mat-menu #menu="matMenu">
        <mat-checkbox class="mat-menu-item" *ngFor="let filter of filters.values" [(ngModel)]="filter.checked" (click)="$event.stopPropagation()" (change)="filterSelected(filter)">{{filter.name}}</mat-checkbox>
      </mat-menu>
    </span>
  </div>

  <div class="full-width d-flex justify-content-center">
    <mat-form-field>
      <input matInput (keyup)="applyFilter($event.target.value)"/>
      <mat-placeholder>
        <mat-icon>search</mat-icon>
      </mat-placeholder>
    </mat-form-field>
  </div>

  <div *ngIf="!loading" class="row justify-content-center">
    <mat-card *ngFor="let data of dataSource.filteredData; trackBy: indentify" class="recipe-card col-xs-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 mat-elevation-z4" [routerLink]="['/recipe-detail/', data.id]">
      <mat-card-header>
        <mat-card-title>{{data.name}}</mat-card-title>
        <mat-card-subtitle>{{data.time}} {{data.time ? 'minutes' : ''}}</mat-card-subtitle>
      </mat-card-header>

      <img mat-card-image *ngIf="data.image" [src]="data.image" alt=""/>

      <mat-card-content>
        <!-- Servings: {{data.servings}}<br/> -->
        <!-- Calories: {{data.calories}}<br/> -->
        Quantity: {{data.count}}
      </mat-card-content>
      <mat-card-actions (click)="$event.stopPropagation()">
          <button mat-button color="warn" (click)="removeIngredients(data.id)">Cook</button>
          <button mat-button color="primary" (click)="addIngredients(data.id)">Add to List</button>
      </mat-card-actions>
    </mat-card>
  </div>

  <mat-paginator [pageSizeOptions]="[10, 25, 50, 100]" class="full-width"></mat-paginator>
</div>
